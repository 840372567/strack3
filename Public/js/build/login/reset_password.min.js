$(function(){var s=$("input[name=setkey]").val();if(s.length<1)t();else{var o=!1;$.ajax({type:"POST",url:resetpassPHP.resetPassword,data:{setkey:s},beforeSend:function(){$(".login-container").hide()},success:function(s){var e=JSON.parse(s);switch(o=!0,parseInt(e.status)){case-1:case-2:case-3:t();break;case 200:$("input[name=npassword]").focus(function(){""==$(this).val()&&i("#npassword")}).blur(function(){$(this).val()?(c("#npassword"),$("input[name=password]").val()&&c("#confirm_password")):i("#npassword")}),$("input[name=confirm_password]").focus(function(){""==$(this).val()&&i("#cpassword")}).blur(function(){$(this).val()?c("#cpassword"):i("#cpassword")});var n=parseInt(e.time),a=parseInt(e.user_id),r=setInterval(function(){0==--n?(t(),clearInterval(r)):$("#forgot_showtime").html(function(s){var e=s,n=0,a=0,r="";n=parseInt(e/60),a=parseInt(e%60),0!=n&&(r+=p(n,2)+":");0==n||a||(r+=p(a,2));0!=a&&(r+=p(a,2));0==n&&(r+=" sec");return r}(n))},1e3);$(".login-container").show(),o&&$("#login_reset").click(function(s){$(this);var e=$("input[name=npassword]").val(),n=$("input[name=confirm_password]").val();s.preventDefault(),e.length<1&&n.length<1?(i("#npassword"),i("#cpassword"),u(".login-container","a-shake")):30<e.length?l(".login-error-show",resetpassPHP.Account_Password_Length):n.length<1&&0<e.length?(i("#cpassword"),u(".login-container","a-shake")):0<n.length&&e.length<1?(i("#npassword"),u(".login-container","a-shake")):e!=n?l(".login-error-show",resetpassPHP.Reset_User_Password_Confirm):$.ajax({type:"POST",url:resetpassPHP.UPresetPassword,data:{user_id:a,npass:e,cpass:n},beforeSend:function(){o=!1},success:function(s){switch(o=!0,parseInt(s)){case-1:l(".login-error-show",resetpassPHP.Reset_User_Password_Confirm);break;case-4:l(".login-error-show",resetpassPHP.Account_Password_Length);break;case-8:l(".login-error-show",resetpassPHP.Illegal_Operation);break;default:location.href=StrackPHP.INDEX}}})})}}})}function t(){var s,e,n,a,r="";s=resetpassPHP.FORGET_RESET_TITLE,e=resetpassPHP.FORGET_RESET_ERROR1,n=resetpassPHP.FORGET_RESET_ERROR2,a=null,a='<div class="login-error">',a+='<div class="login-error-title">'+s+"</div>",a+='<div class="login-error-content">',a+='<div class="login-error-icon"><i class="icon-uniEA30"></i></div>',a+="<p>"+e+"</p>",a+="<p>"+n+"</p>",a+="</div>",r=a+="</div>",$("#login-main").empty().append(r)}function i(s){$(s).removeClass("login-success-notice"),$(s).addClass("login-error-notice")}function c(s){$(s).removeClass("login-error-notice"),$(s).addClass("login-success-notice")}function l(s,e){$(s).css("height","35px").html(e),window.setTimeout(function(){$(s).css("height","0px").html("")},6e3),u("#login-container","a-shake")}function p(s,e){return(""+s).length<e?(new Array(e+1).join("0")+s).slice(-e):""+s}function u(s,e){$(s).hasClass(e)||($(s).addClass(e),window.setTimeout(function(){$(s).removeClass(e)},1e3))}});