$(function(){function a(a){var i="";i=a?$.map(n,function(t){if(0===t.name.toLowerCase().indexOf(a))return t}):n,t(i)}function t(t){var e="";t?(t.forEach(function(a){e+=i(a)}),$("#nation_list").empty().append(e)):$.ajax({type:"POST",url:NationPHP.getNationList,dataType:"json",beforeSend:function(){},success:function(t){var o=$("#nation_search").val();n=t,o?a(o):(t.forEach(function(a){e+=i(a)}),$("#nation_list").empty().append(e))}})}function i(a){var t,i="";switch(a.is_exist){case"y":t="icon-uniF068";break;case"n":t="icon-uniF067"}return i+='<li class="nation-items"><div class="nation-items-wrap"><div class="aign-left"><i class="'+a.id+' flag"></i>'+a.name+'</div><a href="javascript:;" onclick="obj.nation_add(this);" class="aign-right" data-nation="'+a.id+'" data-exist="'+a.is_exist+'" ><i class="'+t+'"></i></a></div></li>'}obj={nation_add:function(a){var i,n,e=$(a),o=e.data("nation"),s=e.data("exist");switch(s){case"y":i=NationPHP.deleteNation,n={primary_ids:o};break;case"n":i=NationPHP.addNation,n={id:o}}$.ajax({type:"POST",url:i,data:n,dataType:"json",beforeSend:function(){$.messager.progress({title:StrackLang.Waiting,msg:StrackLang.loading})},success:function(a){$.messager.progress("close"),200===parseInt(a.status)?(Strack.top_message({bg:"g",msg:a.message}),t(),obj.nation_reset()):layer.msg(a.message,{icon:7,time:1200,anim:6})}})},nation_delete:function(){Strack.ajax_grid_delete("datagrid_box","id",StrackLang.Delete_Nation_Notice,NationPHP.deleteNation)},filter_nation:function(t){a($("#nation_search").val())},nation_reset:function(){$("#datagrid_box").datagrid("reload")}};var n=null;t(),function(){$("#nation_search").on("input",function(){a($(this).val())})}(),function(){$("#datagrid_box").datagrid({url:NationPHP.getNationData,rownumbers:!0,nowrap:!0,fitColumns:Strack.fit_columns(".admin-temp-right",300),height:Strack.panel_height(".admin-temp-right",0),DragSelect:!0,adaptive:{dom:".admin-temp-right",min_width:300,exth:0},columns:[[{field:"id",checkbox:!0},{field:"nation_flag",title:StrackLang.Flag,align:"center",width:200,formatter:function(a,t,i){return'<i class="'+t.id+' flag"></i>'}},{field:"name",title:StrackLang.Nation,align:"center",width:300}]],toolbar:"#tb",pagination:!1,remoteSort:!1})}()});