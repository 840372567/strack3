$(function(){function n(t){$.ajax({type:"POST",url:SignMethodPHP.saveLdapSetting,data:JSON.stringify(t),dataType:"json",contentType:"application/json",beforeSend:function(){$.messager.progress({title:StrackPHP.Waiting,msg:StrackPHP.loading})},success:function(t){$.messager.progress("close"),200===parseInt(t.status)?Strack.top_message({bg:"g",msg:t.message}):layer.msg(t.message,{icon:7,time:1200,anim:6})}})}obj={switch_ldap_item:function(t){var a,i=$(t).attr("data-ldapid");a=$(t).hasClass("on")?($(t).removeClass("on").addClass("off"),$(t).find("i").removeClass("icon-uniF205").addClass("icon-uniF204"),"off"):($(t).removeClass("off").addClass("on"),$(t).find("i").removeClass("icon-uniF204").addClass("icon-uniF205"),"on"),n({type:"ldap_server_list",ldap_id:parseInt(i),status:a})}},Strack.init_open_switch({dom:"#open_ldap_login",value:0,onText:StrackLang.Switch_ON,offText:StrackLang.Switch_OFF,width:100},function(t){n({type:"ldap_open",status:t})}),$("#ldap_server_list").datagrid({url:SignMethodPHP.getLdapServerSettingList,fitColumns:!0,singleSelect:!0,columns:[[{field:"id",title:StrackLang.Switch,align:"center",width:100,formatter:function(t,a,i){var n="on"===a.ldap_switch?"icon-uniF205":"icon-uniF204";return'<a href="javascript:;" class="swicth-gird-font '+a.ldap_switch+'" onclick="obj.switch_ldap_item(this)" data-ldapid="'+t+'"><i class="'+n+'"></i></a>'}},{field:"name",title:StrackLang.Ldap_Name,align:"center",width:300}]],onLoadSuccess:function(t){t.ldap_open&&$("#open_ldap_login").switchbutton("toggle",1)}})});