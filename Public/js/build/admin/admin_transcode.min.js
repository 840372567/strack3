$(function(){obj={refresh_media:function(){r.datagrid("reload")},recoding_media:function(e){var t=r.datagrid("getSelections");if(1<=t.length){var i=[];t.forEach(function(e){i.push(e.media_id)}),$.ajax({type:"POST",url:TranscodePHP.recodingFailMedia,data:{mediaIds:i.join(",")},beforeSend:function(){$.messager.progress({title:StrackPHP.Waiting,msg:StrackPHP.loading})},success:function(e){$.messager.progress("close"),Strack.top_message({bg:"g",msg:TranscodePHP.Recoding_Fail_Media_SC}),obj.refresh_media()}})}else layer.msg(StrackPHP.Please_Select_One,{icon:2,time:1200,anim:6})}};var r=$("#datagrid_box").datagrid({url:TranscodePHP.getMediaProgressData,rownumbers:!0,nowrap:!0,fitColumns:!1,rowheight:48,height:Strack.panel_height(".admin-content-account",0),adaptive:{dom:".admin-content-account",min_width:1004,exth:0},DataNull:TranscodePHP.TranscodeNull,frozenColumns:[[{field:"progress_id",align:"center",checkbox:!0}]],columns:[[{field:"thumb",title:StrackPHP.Thumbnail,align:"center",width:85,frozen:"frozen",findex:0,formatter:function(e,t,i){return Strack.DataGridNoThumb("Media",t.thumb,50,"")}},{field:"media_type",title:TranscodePHP.Media_Type,align:"center",width:160},{field:"link_id",title:TranscodePHP.LinkName,align:"center",width:160},{field:"media_size",title:TranscodePHP.Vedio_Size,align:"center",width:200,formatter:function(e,t,i){return t.media_size+"MB"}},{field:"duration",title:TranscodePHP.Media_Duration,align:"center",width:160,formatter:function(e,t,i){return t.progress.duration+"s"}},{field:"current_time",title:TranscodePHP.CurrentTime,align:"center",width:160,formatter:function(e,t,i){return t.progress.current_time+"s"}},{field:"source",title:TranscodePHP.Source,align:"center",width:160},{field:"progress",title:TranscodePHP.Progress,align:"center",width:360,formatter:function(e,t,i){return t.progress.progress+"%"}}]],toolbar:"#media_tb",pagination:!0,pageSize:100,pageList:[100,200],pageNumber:1,pagePosition:"bottom",remoteSort:!1,onDblClickRow:function(e,t){r.datagrid("selectRow",e)}})});