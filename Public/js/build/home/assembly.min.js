$(function(){function e(){Strack.load_grid_columns("#table_grid",{page:n,module_code:l,structure_id:t,module_type:d,project_id:o},function(e){var i={fields:{add:{},cut:{}},group:e.group_name,sort:e.sort_config.sort_query,request:[{field:"project_id",value:o,condition:"EQ",module_code:l,table:"Entity"},{field:"module_id",value:a,condition:"EQ",module_code:l,table:"Entity"}],filter_input:e.filter_config.filter_input,filter_panel:e.filter_config.filter_panel,filter_advance:e.filter_config.filter_advance},r={url:AssemblyPHP.getAssemblyGridData,height:Strack.panel_height("#table_grid",0),rowheight:43,differhigh:!1,singleSelect:!1,adaptive:{dom:".assembly-m-grid",min_width:510,exth:0,domresize:1},multiSort:!0,DragSelect:!0,queryParams:{page_name:n,module_code:l,structure_id:t,module_id:a,module_type:d,project_id:o,filter:JSON.stringify(i)},panelConfig:{active_filter_id:e.filter_config.filter_id},sortConfig:e.sort_config,sortData:e.sort_config.sort_data,toolbarConfig:{id:"grid_datagrid_main",page_name:n,sortAllow:!0,groupAllow:!0,fieldAllow:!0,viewAllow:!0},searchConfig:{id:"main_grid_search",bar_show:e.filter_bar_show,filterBar:{main_dom:"grid_datagrid_main",bar_dom:"grid_filter_main"}},filterConfig:{id:"grid_filter_main",barParam:{}},columnsFieldConfig:e.columnsFieldConfig,frozenColumns:e.frozenColumns,columns:e.columns,toolbar:"#tb_grid",pagination:!0,pageSize:100,pageList:[100,200,300,400,500,"All"],page_numberber:1,pagePosition:"bottom",remoteSort:!1,onDblClickRow:function(e,i){console.log(i)}};e.group_name&&(r.groupActive=!0,r.groupField=e.group_name,r.groupFormatter=function(e,i){return'<span class="">'+e+"( "+i.length+" )</span>"}),$("#main_datagrid_box").datagrid(r).datagrid("enableCellEditing").datagrid("disableCellSelecting").datagrid("gotoCell",{index:0,field:"id"}).datagrid("columnMoving")})}obj={assembly_add:function(e){var i=$(e).closest(".grid-toolbar"),l=$(e).data("lang"),d=i.data("modulecode");Strack.item_operate_dialog(l,{mode:"create",structure_id:t,module_id:a,parent_id:r,module_type:"assembly",module_code:d,project_id:o},function(){})},assembly_delete:function(e){}};var i=$("#auth_show_page").val(),o=$("#project_id").val(),t=$("#structure_id").val(),a=$("#module_id").val(),r=$("#parent_id").val(),l=$("#module_code").val(),d=$("#module_type").val(),n=($("#module_icon").val(),l+"_main_grid_"+o);Strack.verify_project_data({project_id:o,auth_show_page:i,module_id:a},$("#assembly_wrap"),function(i){e()})});