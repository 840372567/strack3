$(function(){obj={search_project:function(t){s.name=$("#proj_search_box").val(),a(s)},click_down_item:function(t){var e=$(t).attr("from"),o=$(t).attr("options");if(Strack.toggle_item_icon(t,e),"all"!==o)switch(e){case"project_status":s.project_status=[],$("#project_toolbar_status").find(".view-g-item").each(function(){$(this).find("i").hasClass("icon-checked")&&s.project_status.push($(this).attr("options"))});break;case"project_time":s.project_time=o}else s.project_status=[],s.project_time="";a(s)},toggle_group:function(t){var e=$(t).attr("data-groupid"),o=$("#proj_group_"+e);o.hasClass("hidden")?(o.show().removeClass("hidden"),$(t).find("i").removeClass("down").addClass("up")):(o.hide().addClass("hidden"),$(t).find("i").removeClass("up").addClass("down"))}};var s={project_status:[],project_time:"",name:""};function a(t){var e=$(".add-project-main"),i=$("#project_list");$.ajax({type:"POST",url:ProjectPHP.getProjectList,dataType:"json",contentType:"application/json",data:JSON.stringify(t),beforeSend:function(){e.append(Strack.loading_dom("white","","project")).css("overflow","hidden")},success:function(o){$("#st-load_project").remove(),e.css("overflow","auto");var s=0,a="",r="";o.rows.forEach(function(t,e){6===++s?(s=0,r+=n(t),a+=c(r),r=""):r+=n(t),6!==s&&parseInt(o.total)===e+1&&(a+=c(r),r="")}),a?i.empty().append(a):i.empty().append('<div id="pactive_notice" class="project-empty-no">'+StrackLang.No_Filter_Project+"</div>")}})}function r(t,e){var o="";return o+=' <a href="javascript:;" class="item view-g-item view-g-active" onclick="obj.click_down_item(this);" from="'+t+'" options="'+e.id+'"><i class="icon-left icon-unchecked"></i>'+e.name+"</a>"}function c(t){var e="";return e+=' <div class="proj-search-rows"><div class="ui six column doubling grid">'+t+"</div></div>"}function n(t){var e="",o=t.thumb?t.thumb:StrackPHP.IMG+"/project_thumb_default2.jpg";return e+='<div class="column"><a href="'+(Strack.remove_html_ext(ProjectPHP.project_overview)+"/"+t.id+".html")+'" class="proj-list-card"><div class="card"><div class="image"><img src="'+o+'"></div><div class="content"><div class="header text-ellipsis"><div><span class="project-menu-icon ui empty circular label" style="background-color: #'+t.status_color+'; margin-right: 10px" title="'+["status_name"]+'"></span><strong>'+t.name+'</strong></div></div><div class="status text-ellipsis">'+t.status_name+'</div><div class="controller text-ellipsis">'+t.created_by+'</div></div><div class="progress"><div class="progress-base" title="'+StrackLang.Progress+" : "+t.progress+'%"></div><div class="progress-current" title="'+StrackLang.Progress+" : "+t.progress+'%" style="width: '+t.progress+'%;"></div></div></div></a></div>'}$.ajax({type:"POST",url:ProjectPHP.getProjectToolbarSettings,dataType:"json",beforeSend:function(){$(".add-project-header").append(Strack.loading_dom("white","","project_toolbar"))},success:function(t){var e="",o="";t.status_corresponds_list.forEach(function(t){e+=r("project_status",t)}),$("#project_toolbar_status").empty().append(e),t.time_data_list.forEach(function(t){o+=r("project_time",t)}),$("#project_toolbar_time").empty().append(o),$("#st-load_project_toolbar").remove()}}),a(s),$(document).keydown(function(t){13===t.keyCode&&(t.preventDefault(),!0===$("#proj_search_box").is(":focus")&&obj.search_project())})});