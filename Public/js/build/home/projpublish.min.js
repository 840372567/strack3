$(function(){function t(t,a,i){var e=Strack.build_filter({project_id:["eq",a],active:["eq",1]},{},{},{},"and",{},{},[{sortName:"created",sortOrder:"desc"}]);Strack.G.Gfilter_data.publish_version=e,$("#datagrid_box").datagrid({url:PublishPHP.getPublishData,fitColumns:!1,height:Strack.panel_height(".entity-datalist",0),rowheight:49,differhigh:!1,singleSelect:!1,DragSelect:!0,adaptive:{dom:".entity-datalist",min_width:510,exth:0,domresize:1},queryParams:{filter:JSON.stringify(e),op_type:t,ptype:8210,project_id:a,tab:"tasks"},frozenColumns:[[{field:"publish_id",title:StrackPHP.Taskid,checkbox:!0}]],columns:[i],toolbar:"#task_tb",pagination:!0,pageSize:100,pageList:[100,200],pageNumber:1,pagePosition:"bottom",remoteSort:!1,onRowContextMenu:function(t,a,i){Strack.grid_clipboard(t.target),t.preventDefault(),$("#st_menu_task").menu("show",{left:t.pageX,top:t.pageY})}}),Strack.LoadFieldsList(8210,1,"datagrid_box","no"),Strack.GroupDown(a,8210,"datagrid_box",{SortChange:"Strack.sort_change",SortAdv:"Strack.DataSortAdv",SortItem:"Strack.DataSortItem"},{group:"type_id"}),Strack.getViewSet(a,8210,"datagrid_box",PARSE_VAR.rules,"")}obj={PublishtoTrash:function(t){var a=$("#datagrid_box").datagrid("getSelections"),e=[],r=$(t).data("ftype");a.forEach(function(t){e.push(t.publish_id)}),Strack.ajax_grid_delete(a,PublishPHP.Published_Delete_Notice,PublishPHP.DeletePublish,{publish_ids:e.join(","),pid:i,ptype:r},"#datagrid_box",PublishPHP.Published_Delete_SC)}};var a=$(".projpage-main");if(PARSE_VAR.auth.authority){var i=$("input[name=proj_id]").val(),e={};Strack.verify_project_data(i)>0?(a.show(),function(t){for(var a in t){var i=t[a];e[i.alias]=i,i.alias}}(PARSE_VAR.rules),Strack.project_sub_menu(i,82),function(a,i,e){$.ajax({type:"POST",url:StrackPHP.DynamicFields,dataType:"json",data:{project_id:i,type:e},success:function(r){var o=[];r.forEach(function(t,a){t&&o.push(Strack.DynamicFieldset(e,t,a,"",{pid:i}))}),t(a,i,o)}})}(82,i,8210)):a.empty().append(Strack.ProjWarn(StrackPHP.Project_None_Warning)).show()}else a.empty().append(Strack.ProjWarn(StrackPHP.NoPermission)).show()});