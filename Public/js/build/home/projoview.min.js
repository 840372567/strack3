$(function(){function e(){$("#projr_header").empty().append(h("activity")),Strack.AjaxProjInfo(y,"project"),a(y,1,100,"new")}function a(e,r,o,n){$.ajax({type:"POST",url:ProjOverPHP.LoadProjActivity,dataType:"json",data:{pid:e,pagenum:r,pagesize:o,type:n},beforeSend:function(){"new"==n&&$("#proj_activity").append(Strack.loading_dom("white","","pactivity"))},success:function(s){var c="",l=s.board,d=s.event_log,p=d.total,m=d.rows;l.length>0||m.length>0?(l.forEach(function(e){c+=t(e)}),m.forEach(function(e){c+=i(e)}),"new"==n?($("#proj_activity").empty().append(c),$(".projpage-main").on("scroll",function(){if((this.scrollTop||this.scrollTop)==(this.scrollHeight||this.scrollHeight)-(this.clientHeight||this.clientHeight)){r++;var t=Math.ceil(p/o);r<=t&&a(e,r,o,"more")}})):$("#proj_activity").append(c)):"new"==n&&$("#st-load_pactivity").remove()}})}function t(e){var a="",t=Strack.remove_html_ext(StrackPHP.profile)+"/"+e.user_base.user_id+".html",i=Strack.DGavatar(e.avatar,e.user_base.first_name,e.user_base.last_name);return a+='<div id="pnotice_'+e.id+'" class="p-activity-item"><div class="pac-item-avatar comments_avatar aign-left">'+i+'</div><div class="pac-item-content aign-left"><div class="pac-item-title">'+n(e)+'<a href="'+t+'" class="author" target="_blank">'+e.user_base.fullname+'</a><span class="item-title-do">'+ProjOverPHP.NoticeBoardTitle+'</span><span class="item-title-date">'+e.time+"</span>"+o(e.edit,e.id)+'</div><div class="pac-item-details"><div class="item-details-text">'+e.text+"</div></div></div></div>"}function i(e){var a="",t=Strack.remove_html_ext(StrackPHP.profile)+"/"+e.user_id+".html",i=Strack.DGavatar(e.path,e.first_name,e.last_name),o="pnotice_"+e.log_id,s="",c="",l="",d="",p=0,m="",u="javascript:;";if(e.link_data){switch(parseInt(e.board_type)){case 10:s=e.link_data.content,m=StrackPHP.pagetask.replace(".html",""),u=m+"/"+e.project_id+"_"+e.link_data.type+"_"+e.link_data.task_id+".html";break;case 3020:case 4020:case 7020:s=e.link_data.item_name,e.link_data.description&&(d=e.link_data.description),m=StrackPHP.projitem.replace(".html",""),u=m+"/"+e.project_id+"_"+e.link_data.type+"_"+e.link_data.item_id+".html"}c=Strack.widget_status_dom(e.link_data.status_icon,e.link_data.status_name,e.link_data.status_color),l=Strack.hex_to_rgb(e.link_data.status_color,.3),p=e.link_data.type}else s=StrackPHP.Already_Deleted,c=Strack.widget_status_dom("icon-uniF00D","Omitted","D3DCE6"),l=Strack.hex_to_rgb("D3DCE6",.3);return a+='<div id="'+o+'" class="p-activity-item"><div class="pac-item-avatar comments_avatar aign-left">'+i+'</div><div class="pac-item-content ui items  aign-left"><div class="pac-item-title">'+n(e)+'<a href="'+t+'" class="author" target="_blank">'+e.user_name+'</a><span class="item-title-do">'+e.summary+'</span><span class="item-title-date">'+e.created+'</span></div><div class="item"> <a href="'+u+'" class="image task-thumb-show ac_img_url " > '+r(e.thumb,p)+'</a> <div class="content"> <a class="header">'+s+'</a> <div class="ac_status"> <div class="pac-item-status info-content-show" style="background-color: '+l+'">'+c+'</div></div> <div class="description"> <p></p> </div> <div class="extra">'+d+"</div> </div> </div></div></div>"}function r(e,a){return e?'<div class="panel_thumb_img"><img src="'+e+'"></div>':0==a?'<div class="panel-thumb-null"><i class="icon-uniE765 icon-left-p"></i></div>':'<div class="panel-thumb-null">'+Strack.ProjTaskIcon(a)+"</div>"}function o(e,a){var t="";return 10==parseInt(e)&&"yes"==PARSE_VAR.rules.proj_denotice.allow&&(t+='<div class="aign-right note-tedit"><a href="javascript:;" onclick="obj.DeleteNotice(this)" class="note-editicon" data-activity="'+a+'"><i class="icon-uniE765"></i></a></div>'),t}function n(e){var a="";switch(parseInt(e.board_type)){case 677:a+='<span class="el-tag el-tag--primary" style="margin-right: 5px;">'+ProjOverPHP.Announcement+"</span>";break;case 10:a+='<span class="el-tag el-tag--success" style="margin-right: 5px;">'+StrackPHP.Tasks+"</span>";break;case 3020:a+='<span class="el-tag el-tag--success" style="margin-right: 5px;">'+StrackPHP.PreProduction+"</span>";break;case 4020:a+='<span class="el-tag el-tag--success" style="margin-right: 5px;">'+StrackPHP.Assets+"</span>";break;case 7020:a+='<span class="el-tag el-tag--success" style="margin-right: 5px;">'+StrackPHP.Shots+"</span>"}return 20==parseInt(e.stick)&&(a+='<span class="el-tag el-tag--danger" style="margin-right: 5px;">'+StrackPHP.Stick+"</span>"),a}function s(){$("#projr_header").empty().append(h("team")),l(y)}function c(e){$.ajax({type:"POST",url:ProjOverPHP.TeamGroupList,data:{pid:e,up_url:StrackPHP.UPLOADS},beforeSend:function(){$("#team_group_list").append(Strack.loading_dom("white","","gouplist"))},success:function(e){var a=JSON.parse(e),t="";a.forEach(function(e){t+=p(e)}),$("#group_list").empty().append(t),$("#st-load_gouplist").remove()}})}function l(e){var a=$("#projover_rmain");$.ajax({type:"POST",url:ProjOverPHP.TeamSuperList,data:{pid:e,up_url:StrackPHP.UPLOADS},beforeSend:function(){a.empty().append('<div id="pr-super-list" class="projover-r-super"></div>').append(Strack.loading_dom("white","","superlist"))},success:function(e){var a=JSON.parse(e),t="";a.rows.forEach(function(e){t+=d(e)}),$("#pr-super-list").append(t),$("#st-load_superlist").remove()}})}function d(e){var a="";return a+='<li class="super-team-item"><div class="super-item-avatar aign-left"><div style="text-align:center;height:auto;" class="datagrid-cell datagrid-cell-c1-path">'+Strack.DGavatar(e.path,e.user_info.first_name,e.user_info.last_name)+'</div></div><div class="user-tips-right"><div class="user-tips-uname">'+e.user_info.fullname+'</div><div class="user-tips-info"><span style="margin-right: 5px">'+e.steps+"</span><span>"+e.entity+"</span></div></div></li>"}function p(e){var a="",t=u(e.step_type,e.alias);return a+='<a href="javascript:;" class="team-list-item" onclick="obj.SwitchGroup(this)" data-groupid="'+e.step_id+'" data-teamtype="'+e.team_type+'" data-entity="'+e.step_type+'"><div class="team-item-avatar aign-left"><div style="text-align:center;height:auto;" class="datagrid-cell datagrid-cell-c1-path"><span class="'+t.color+'">'+t.avatar+'</span></div></div><div class="team-item-name aign-left">'+e.step_name+"</div>"+m(e.edit)+"</a>"}function m(e){var a="";return parseInt(e)>0&&(a+='<a href="javascript:;" class="aign-right team-g-delete icon-de-hide" onclick="obj.DeleteGroup(10);"><i class="icon-uniE6D5"></i></a>'),a}function u(e,a){var t=[];switch(e){case 0:t.avatar="SP",t.color="super-team-avatar";break;case 30:t.avatar="P"+Strack.JointLetter(a),t.color="step-pteam-avatar";break;case 40:t.avatar="A"+Strack.JointLetter(a),t.color="step-ateam-avatar";break;case 70:t.avatar="S"+Strack.JointLetter(a),t.color="step-team-avatar";break;case 100:t.avatar="C"+Strack.JointLetter(a),t.color="user-team-avatar"}return t}function P(e){$.ajax({type:"POST",url:StrackPHP.ProjMainHead,data:{pid:e,up_url:StrackPHP.UPLOADS},beforeSend:function(){$(".projpage-header").append(Strack.loading_dom("white","","projtop"))},success:function(e){var a=JSON.parse(e);$("#st-load_projtop").remove(),a.billboard&&($("#billboard_img").empty().append('<img src="'+a.billboard+'">'),g()),$("#projectover_thumb").empty().append(Strack.SetProjMainThumb(a.midthumb)),$("#ProjMain_title").html(a.p_name)}})}function v(){$("#team_data").datagrid({url:ProjOverPHP.ProjectTeamUser,height:Strack.panel_height(".team-right-table",0),differhigh:!1,fitColumns:!0,rowheight:58,DragSelect:!0,adaptive:{dom:".team-right-table",min_width:510,exth:0},DataNull:ProjOverPHP.PteamNodata,queryParams:{pid:y},columns:[[{field:"user_id",checkbox:!0},{field:"avatar",title:StrackPHP.Avatar,align:"center",width:60,formatter:function(e,a,t){return e?'<img class="e-avatar" src="'+StrackPHP.UPLOADS+"/avatars/"+e+'" />':'<span class="'+_(a.group_type)+'">'+Strack.JointLetter(a.first_name,a.last_name)+"</span>"}},{field:"fullname",title:StrackPHP.Name,align:"center",width:160},{field:"team_type",title:StrackPHP.Group,align:"center",width:160},{field:"e_type",title:StrackPHP.Entity,align:"center",width:160},{field:"belong_to",title:StrackPHP.BelongTo,align:"center",width:160},{field:"scope_name",title:StrackPHP.Scope,align:"center",width:160},{field:"dept_name",title:StrackPHP.Department,align:"center",width:160}]],toolbar:"#team_tb",pagination:!0,pageSize:100,pageList:[100,200],pageNumber:1,pagePosition:"bottom",remoteSort:!1})}function _(e){var a="";switch(parseInt(e)){case 0:a="super-team-avatar_max";break;case 30:a="step-pteam-avatar_max";break;case 40:a="step-ateam-avatar_max";break;case 70:a="step-team-avatar_max";break;case 100:a="user-team-avatar_max"}return a}function g(){var e=$("#billboard_img"),a=e.width(),t=e.height(),i=a/t;if(i>=4.5){var r=a/4.5,o="-"+(r-240)/2+"px";e.find("img").css({width:"100%",height:"auto","margin-top":o})}else e.find("img").css({width:"auto",height:"100%","margin-top":"0px"})}function h(e){var a="";switch(e){case"activity":a+='<span><i class="icon-uniEA02 icon-left"></i></span><span class="projover-r-header-t">'+StrackPHP.Info+'</span><span class="aign-right"><i class="icon-uniE60D"></i></span>';break;case"team":a+='<span><i class="icon-uniE753 icon-left"></i></span><span class="projover-r-header-t">'+ProjOverPHP.Supervisors+"</span>"}return a}function k(e,a,t){var i="";return"yes"==PARSE_VAR.rules.proj_updategroup.allow&&(i+='<div class="st-buttons-sig aign-left"><a href="javascript:;"  onclick="obj.ModifyGroup(this);" data-pid="'+e+'" data-teamid="'+a+'" data-tname="'+t+'"><i class="icon-uniE684 icon-left"></i><span class="stp-title">'+ProjOverPHP.ModifyGroup+"</span></a></div>"),"yes"==PARSE_VAR.rules.proj_delgroup.allow&&(i+='<div class="st-buttons-sig aign-left"><a href="javascript:;"  onclick="obj.RemoveGroup(this);" data-pid="'+e+'" data-teamid="'+a+'" data-tname="'+t+'"><i class="icon-remove icon-left"></i><span class="stp-title">'+ProjOverPHP.RemoveGroup+"</span></a></div>"),i}function f(){$(".team-list-item").removeClass("team-item-active"),$("#team_show_title").html(ProjOverPHP.AllTeamMember).attr("data-groupid","").attr("data-teamtype","").attr("data-entity","")}function b(a){switch($(".pitem-wrap").removeClass("active").each(function(){$(this).data("tab")==a&&$(this).addClass("active")}),f(),a){case"activity":e();break;case"team":c(y),v(),s()}}obj={switchProjTab:function(e){var a=$(e),t=a.data("tab");$(".proj_item").removeClass("active"),a.addClass("active"),b(t),Strack.save_storage("projectover_tab_"+y,t),Strack.SideColumnClose()},MDProjtname:function(e,a){var t=$("#ProjMain_title").html();$(".edit_pname").hide(),$(".proj_over_title").show(),$("#poverview_name").val(t)},MDProjthumb:function(e){Strack.open_dialog("dialog",{title:StrackPHP.Upload_Thumb,width:480,height:180,content:Strack.dialog_dom({type:1,hidden:[{case:101,id:"Mproj_id",type:"hidden",name:"proj_id",valid:1,value:e},{case:102,id:"Mproj_canvas"}],items:[{case:1,id:"Mproj_thumb",type:"text",lang:StrackPHP.Name,name:"proj_thumb",valid:0,value:""}],footer:[{obj:"choice_thumb",type:4,title:""},{obj:"proj_thumb",type:1,title:StrackPHP.Update},{obj:"dialog_cancel",type:8,title:StrackPHP.Cancel}]}),inits:function(){Strack.upload_image("img_up_bnt","Mproj_thumb","Mproj_canvas")},close:function(){Strack.G.Jcrop_Canvas=null}})},proj_thumb:function(){if(Strack.G.Jcrop_Canvas){var e=$("input[id=Mproj_id]").val(),a=Strack.G.Jcrop_Canvas.toDataURL("image/jpg");$.ajax({type:"POST",url:ProjOverPHP.UPorjThumb,data:{proj_id:e,up_url:StrackPHP.UPLOADS,img:a},beforeSend:function(){$.messager.progress({title:StrackPHP.Waiting,msg:StrackPHP.loading})},success:function(a){$.messager.progress("close"),-1==a?layer.msg(StrackPHP.Illegal_Operation,{icon:7,time:1200,anim:6}):-400==a?layer.msg(StrackPHP.Upload_Failed,{icon:7,time:1200,anim:6}):(Strack.top_message({bg:"g",msg:StrackPHP.Thumb_Upload_SC}),$("#dialog").dialog("close"),P(e))}})}else layer.msg(StrackPHP.Please_Select_Image,{icon:2,time:1200,anim:6})},AddGroupDialog:function(e){var a=$(e),t=a.data("projid");Strack.open_dialog("dialog",{title:ProjOverPHP.AddGroupTitle,width:480,height:200,content:Strack.dialog_dom({type:1,hidden:[{case:101,id:"Mproj_id",type:"hidden",name:"project_id",valid:1,value:t}],items:[{case:1,id:"Mgroup_name",type:"text",lang:StrackPHP.Name,name:"group_name",valid:1,value:""}],footer:[{obj:"AddGroupUp",type:1,title:StrackPHP.Submit},{obj:"dialog_cancel",type:8,title:StrackPHP.Cancel}]})})},AddGroupUp:function(){Strack.ajax_dialog_form("#st_dialog_form input",S,ProjOverPHP.AddGroup,{back:function(e){var a=JSON.parse(e);-1==a.status?layer.msg(ProjOverPHP.Add_NULL_Group,{icon:7,time:1200,anim:6}):200==a.status&&($("#dialog").dialog("close"),c(y),obj.ShowAllMembers())}})},ModifyGroup:function(e){var a=$(e),t=a.data("pid"),i=a.data("teamid"),r=a.data("tname");Strack.open_dialog("dialog",{title:ProjOverPHP.MDGroupTitle,width:480,height:200,content:Strack.dialog_dom({type:1,hidden:[{case:101,id:"Mproj_id",type:"hidden",name:"project_id",valid:1,value:t},{case:101,id:"Mteam_id",type:"hidden",name:"team_id",valid:1,value:i}],items:[{case:1,id:"Mgroup_name",type:"text",lang:StrackPHP.Name,name:"group_name",valid:1,value:r}],footer:[{obj:"MDGroupUp",type:1,title:StrackPHP.Update},{obj:"dialog_cancel",type:8,title:StrackPHP.Cancel}]})})},MDGroupUp:function(){Strack.ajax_dialog_form("#st_dialog_form input",S,ProjOverPHP.MDGroup,{back:function(e){var a=JSON.parse(e);switch(parseInt(a.status)){case-1:layer.msg(ProjOverPHP.Add_NULL_Group,{icon:7,time:1200,anim:6});break;case-2:layer.msg(ProjOverPHP.GroupTitleExist,{icon:7,time:1200,anim:6});break;case 200:$("#dialog").dialog("close"),c(y),$("#team_data").datagrid("reload")}}})},RemoveGroup:function(e){var a=$(e),t=a.data("pid"),i=a.data("teamid");i>0?$.messager.confirm(StrackPHP.Confirmation_Box,ProjOverPHP.RemoveGroupNotice,function(e){e&&$.ajax({type:"POST",url:ProjOverPHP.RemoveGroupUp,data:{project_id:t,teamid:i},beforeSend:function(){$.messager.progress({title:StrackPHP.Waiting,msg:StrackPHP.loading})},success:function(e){$.messager.progress("close"),$("#team_show_tools").empty(),c(t),obj.ShowAllMembers()}})}):layer.msg(StrackPHP.Illegal_Operation,{icon:2,time:1200,anim:6})},SwitchGroup:function(e){var a=$(e),t=a.data("groupid"),i=a.data("teamtype"),r=a.data("entity"),o=a.find(".team-item-name").html();$(".team-list-item").removeClass("team-item-active"),a.addClass("team-item-active"),$("#team_show_title").html(o).attr("data-groupid",t).attr("data-teamtype",i).attr("data-entity",r),$("#team_data").datagrid("reload",{pid:y,link_id:t,team_type:i,entity:r}),30==parseInt(i)?$("#team_show_tools").empty().append(k(y,t,o)):$("#team_show_tools").empty()},ShowAllMembers:function(){f(),$("#team_data").datagrid("reload",{pid:y})},AddMembers:function(e){var a=$(e),t=$("#team_show_title"),i=a.attr("data-pid"),r=t.attr("data-groupid"),o=t.attr("data-teamtype"),n=t.attr("data-entity");if(r&&o){var s,c="";0==r?(c=[{case:1,id:"Metype",type:"text",lang:StrackPHP.Entity,name:"e_type",valid:1,value:""},{case:1,id:"Msteps",type:"text",lang:StrackPHP.Steps,name:"steps",valid:1,value:""},{case:1,id:"Mscope_list",type:"text",lang:StrackPHP.Scope,name:"scope",valid:1,value:""},{case:1,id:"Muser_list",type:"text",lang:StrackPHP.Members,name:"user_id",valid:1,value:""}],s=347):(c=[{case:1,id:"Mscope_list",type:"text",lang:StrackPHP.Scope,name:"scope",valid:1,value:""},{case:1,id:"Muser_list",type:"text",lang:StrackPHP.Members,name:"user_id",valid:1,value:""}],s=249),Strack.open_dialog("dialog",{title:ProjOverPHP.AddMembersTitle,width:480,height:s,content:Strack.dialog_dom({type:1,hidden:[{case:101,id:"Mproj_id",type:"hidden",name:"project_id",valid:1,value:i},{case:101,id:"Mgroup_id",type:"hidden",name:"g_id",valid:1,value:r},{case:101,id:"Mteam_type",type:"hidden",name:"team_type",valid:1,value:o},{case:101,id:"Mentity",type:"hidden",name:"entity",valid:1,value:n}],items:c,footer:[{obj:"AddMembersUp",type:1,title:StrackPHP.Submit},{obj:"dialog_cancel",type:8,title:StrackPHP.Cancel}]}),inits:function(){0==r?(Strack.combobox_widget(10,"#Metype",ProjOverPHP.EntityType,"e_id","e_name","",380,"","",{disabled:!1,linkdom:"#Msteps",project_id:i}),Strack.combobox_widget(11,"#Msteps",ProjOverPHP.StepsList,"type_id","type_name","",380,"","",{disabled:!0,multiple:!1}),Strack.combobox_widget(10,"#Mscope_list",ProjOverPHP.ScopeList,"scope_id","scope_name","",380,"","",{disabled:!1,linkdom:"#Muser_list",project_id:i}),Strack.combobox_widget(23,"#Muser_list",ProjOverPHP.UserListCombox,"user_id","uname","",380,"","deptname",{disabled:!0,multiple:!1})):(Strack.combobox_widget(10,"#Mscope_list",ProjOverPHP.ScopeList,"scope_id","scope_name","",380,"","",{disabled:!1,linkdom:"#Muser_list",project_id:i}),Strack.combobox_widget(23,"#Muser_list",ProjOverPHP.UserListCombox,"user_id","uname","",380,"","deptname",{disabled:!0,multiple:!0}))}})}else layer.msg(ProjOverPHP.Choice_NULL_Group,{icon:2,time:1200,anim:6})},AddMembersUp:function(){Strack.ajax_dialog_form("#st_dialog_form input",S,ProjOverPHP.AddMembers,{back:function(e){$("#dialog").dialog("close"),$("#team_data").datagrid("reload")}})},RemoveMembers:function(e){var a=$("#team_data").datagrid("getSelections"),t=[];a.length>0?(a.forEach(function(e){t.push(e.team_user_id)}),$.ajax({type:"POST",url:ProjOverPHP.RemoveMembers,data:{project_id:y,tuids:t.join(",")},beforeSend:function(){$.messager.progress({title:StrackPHP.Waiting,msg:StrackPHP.loading})},success:function(e){$.messager.progress("close"),$("#team_data").datagrid("reload")}})):layer.msg(StrackPHP.Please_Select_One,{icon:2,time:1200,anim:6})},AddNoticeBoard:function(){Strack.open_dialog("dialog",{title:ProjOverPHP.AddNoticeBoard,width:480,height:300,content:Strack.dialog_dom({type:1,hidden:[{case:101,id:"Mproject_id",type:"hidden",name:"project_id",valid:1,value:y}],items:[{case:2,id:"Mstick",type:"text",lang:StrackPHP.Stick,name:"stick",valid:1,value:""},{case:7,id:"Mnotice_text",type:"text",lang:ProjOverPHP.NoticeBoard,name:"notice_text",valid:1,value:""}],footer:[{obj:"NewNoticeBoard",type:1,title:StrackPHP.Submit},{obj:"dialog_cancel",type:8,title:StrackPHP.Cancel}]}),inits:function(){Strack.combobox_widget(2,"#Mstick",Strack.JsonStickType(),"stick_id","stick_name",10),Strack.G.MDeditor=new Simditor({textarea:$("#Mnotice_text"),footer_control:!1,toolbar:["color","bold","emoji"]}),$("#st_dialog_form").find(".simditor-footer").remove()}})},NewNoticeBoard:function(){var e=Strack.G.MDeditor.getValue(),t=Strack.get_combos_val("#Mstick","combobox","getValue"),i=$("#Mproject_id").val();0==t.length?layer.msg(ProjOverPHP.Stick_NULL,{icon:2,time:1200,anim:6}):0==e.length?layer.msg(ProjOverPHP.NoticeBoard_NULL,{icon:2,time:1200,anim:6}):$.ajax({type:"POST",url:ProjOverPHP.NewNoticeBoard,data:{project_id:i,stick_id:t,notice_text:e},dataType:"json",beforeSend:function(){$.messager.progress({title:StrackPHP.Waiting,msg:StrackPHP.loading})},success:function(e){Strack.top_message({bg:"g",msg:ProjOverPHP.Board_Add_SC}),$.messager.progress("close"),Strack.dialog_cancel(),Strack.G.MDeditor=null,a(y,1,100,"new")}})},DeleteNotice:function(e){var a=$(e).data("activity");$.ajax({type:"POST",url:ProjOverPHP.DeleteNoticeBoard,dataType:"json",data:{project_id:y,board_id:a},beforeSend:function(){$("#proj_activity").append(Strack.loading_dom("white","","pactivity"))},success:function(e){$("#pnotice_"+e.board_id).remove(),$("#st-load_pactivity").remove()}})},ResetProject:function(){Strack.delete_storage("projnav_"+y),location.reload()}};var j=$(".projpage-main");if(PARSE_VAR.auth.authority){var y=$("input[name=proj_id]").val();if(Strack.verify_project_data(y)>0){!function(e){for(var a in e){var t=e[a];switch(t.alias){case"proj_billboard":case"projname_update":case"proj_addnotice":case"proj_denotice":case"proj_addgroup":case"proj_updategroup":case"proj_delgroup":case"groupmember_add":case"gmember_delete":case"project_action":"no"==t.allow&&$(".ah_"+t.alias).remove();break;case"proj_Upload_Thumb":"no"==t.allow&&($(".ah_"+t.alias).remove(),$("#p_thumb").append(StrackPHP.Thumbnail))}}}(PARSE_VAR.rules),j.show();var S={};S["group_name-1"]=ProjOverPHP.Add_NULL_Group,S["scope-1"]=ProjOverPHP.Choice_NULL_Scope,S["user_id-1"]=ProjOverPHP.Choice_NULL_User,S["e_type-1"]=ProjOverPHP.Choice_NULL_Entity,S["steps-1"]=ProjOverPHP.Choice_NULL_Steps,Strack.save_storage("projid",[y,10]),Strack.project_sub_menu(y,10),P(y),function(){$(window).on("resize",function(){g()})}(),$(".special.cards .image").dimmer({on:"hover"});var H=Strack.read_storage("projectover_tab_"+y);H||(H="activity"),$("#tab_"+H).addClass("active"),b(H)}else j.empty().append(Strack.ProjWarn(StrackPHP.Project_None_Warning)).show()}else j.empty().append(Strack.ProjWarn(StrackPHP.NoPermission)).show()});